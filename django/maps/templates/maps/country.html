{% extends 'maps/base.html' %}
{% load static %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Dashboard</title>
    <link href="css/styles.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <style>
      .datatablesSimple {
        border-collapse: collapse;
        width: 100%;
      }

      .datatablesSimple th,
      .datatable-table td {
        border-bottom: 1px solid #dddddd; /* 각 행에 하단 테두리 추가 */
        padding: 8px;
        text-align: left;
      }

      .datatablesSimple th {
        background-color: #f2f2f2;
      }
    </style>
</head>

<h2>{{ country }}</h2>
<p>행사리스트, 항공권, 숙박, 맛집 정보 제공.</p>
<br>

<div style="float: left; width: 100%; padding: 30px;">
    <h3>행사가 제일 많은 지역은?</h3>
</div>

<div style="float: left; width: 100%; padding: 30px;">
    <h3>행사 종류는?</h3>
</div>

        <div style="float: left; width: 100%; padding: 30px;">
            <h3>{{ country }}의 인기있는 행사 list</h3>
        </div>
            <div id="layoutSidenav_content" style="float: left; width: 100%; padding: 110px;">
                <main>
                    <div class="container-fluid px-4">
                        <h3 class="mt-4">{{ country }}의 인기있는 행사 list</h3>
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-table me-1"></i>
                                DataTable Example
                            </div>
                            <div class="card-body">
                                <table id="datatablesSimple">
                                    <thead>
                                        <tr>
                                            <th>Title</th>
                                            <th>Rank</th>
                                            <th>PHQ Attendance</th>
                                            <th>Time Start</th>
                                            <th>Time End</th>
                                            <th>Address</th>
                                            <th>Region</th>
                                            <th>Predicted Event Spend</th>
                                        </tr>
                                    </thead>
                                    <tfoot>
                                        <tr>
                                            <th>Title</th>
                                            <th>Rank</th>
                                            <th>PHQ Attendance</th>
                                            <th>Time Start</th>
                                            <th>Time End</th>
                                            <th>Address</th>
                                            <th>Region</th>
                                            <th>Predicted Event Spend</th>
                                        </tr>
                                    </tfoot>
                                    <tbody>
                                        {% for event in country_events %}
                                            <tr>
                                                <td><a class="nav-link" href="{% url 'event_detail' country=country event_id=event.EventID %}">{{ event.Title }}</a></td>
                                                <td>{{ event.Rank }}</td>
                                                <td>{{ event.PhqAttendance }}</td>
                                                <td>{{ event.TimeStart }}</td>
                                                <td>{{ event.TimeEnd }}</td>
                                                <td>{{ event.Address }}</td>
                                                <td>{{ event.Region }}</td>
                                                <td>{{ event.PredictedEventSpend }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
            <div style="float: left; width: 100%; padding: 10px;">
                <h2>이벤트 많은 지역(테스트용)</h2>
                <ul>
                    {% for top_region in top_regions %}
                    <li>{{ top_region }}</li>
                    {% endfor %}
                </ul>
            </div>
            <div style="float: left; width: 100%; padding: 10px;">
                <h2>카테고리별 이벤트 수 (테스트용)</h2>
                <ul>
                    {% for category in categories %}
                    <li>{{ category.Category }} - {{ category.total_events }}</li>
                    {% endfor %}
                </ul>
            </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="{% static 'maps/js/scripts.js' %}"></script>
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
        <script src="{% static 'maps/js/datatables-simple-demo.js' %}"></script>
{% endblock %}
